#!/bin/sh

# unichar
# File ID: 23f515ba-5d47-11df-bcb0-90e6ba3022ac

progname=unichar

if test "$1" = "-c"; then
    # Convert from unichar output to actual UTF-8
    shift
    cut -f 1 -d ';' | fromhex -u
    exit 0
fi

if test "$1" = "-g"; then
    # FIXME: No matter what I do, it won't STFU
    (okular ~/pub/unicode/current/charts/CodeCharts.pdf &>/dev/null) &
    exit 0
fi

unset grep_str
for f in "$@"; do
    grep_str="$grep_str | grep -Ei $f"
done
test -z "$grep_str" && {
    echo $progname: No search string specified >&2
    exit 1
}
sh -c "zcat -f $HOME/pub/unicode/UNIDATA/UnicodeData.txt* $grep_str"
